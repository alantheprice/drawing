!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=18)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.e=void 0;var r=n(14),i=n(2),o=function(){};o.prototype.addEventListener=function(t,e){if(t===i.CUSTOM_DRAG_EVENT.slice(2))return void(0,i.addDragHandler)(this,e);(0,i.addEvent)(this,t,e)},o.prototype.windowOffset=function(){var t={x:this.elem.offsetLeft,y:this.elem.offsetTop},e=this.parentElement;for(;e.parentElement;)t.x+=e.offsetLeft,t.y+=e.offsetTop,e=e.parentElement;return t},o.prototype.setActive=function(t){this[t?"addClass":"removeClass"]("active")},o.prototype.addClass=function(t){if(!this.className)return void this.setAttribute(this.elem,"className",t);if(this.className.split(" ").indexOf(t)>-1)return;this.className=[this.className,t].join(" ")},o.prototype.removeClass=function(t){if(!this.className||-1===this.className.indexOf(t))return;this.className=this.className.split(" ").filter(function(e){return e!==t}).join(" ")},o.prototype.clone=function(t,e){var n=(this.children||[]).map(function(t){return t.clone()}),r=a(this.tagName)(Object.assign({},this.attr,e),n);return this.handle=t,r};var a=(0,r.override)(o.prototype),s="a|abbr|address|area|article|aside|audio|b|base|bdi|bdo|blockquote|body|br|button|canvas|caption|cite|code|col|colgroup|data|datalist|dd|del|details|dfn|div|dl|dt|em|embed|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|head|header|hr|html|i|iframe|img|input|ins|kbd|label|legend|li|link|main|map|mark|meta|meter|nav|noscript|object|ol|optgroup|option|output|p|param|picture|pre|progress|q|rp|rt|rtc|ruby|s|samp|script|section|select|slot|small|source|span|strong|style|sub|summary|sup|table|tbody|td|template|textarea|tfoot|th|thead|time|title|tr|track|u|ul|var|video|wbr".split("|").reduce(function(t,e){return t[e]=a(e),t},{});s.virtual=a("virtual",{attach:function(t){return this.parentElement=t,this.parentElement}});e.e={register:a,elements:s,getHandle:r.getHandle}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var i=e.Color=function(){function t(e,n,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.r=Math.round(e),this.g=Math.round(n),this.b=Math.round(r),this.a=isNaN(i)?1:i}return r(t,[{key:"setOpacity",value:function(t){var e=isNaN(t)?1:t;this.a=Math.min(e,1)}},{key:"update",value:function(t){this.r=Math.round(t.r||this.r),this.g=Math.round(t.g||this.g),this.b=Math.round(t.b||this.b),this.a=isNaN(t.a)?1:Math.min(t.a,this.a)}},{key:"getAsCssValue",value:function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.a+")"}},{key:"copy",value:function(){return t.fromObject(this)}}]),t}();i.fromObject=function(t){var e=new i(1,1,1);return e.update(t),e}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.addDragHandler=function(t,e){i(t,"mousedown",function(n,r,o){e.start.call(t,n,t,o);var a=null,s=function(n,r,i){clearTimeout(a),e.finish.call(t,n,r,i),u(),c()},c=i(t,"mouseup",s,!0),u=i(t,"mousemove",function(n,r,i){clearTimeout(a),e.move.call(t,n,r,i),a=setTimeout(function(){s(n,r,i)},500)},!0)},!0)},e.addEvent=i;var r=e.TOUCH_EVENT_MAP={click:"click",mousedown:"touchstart",mouseup:"touchend",mousemove:"touchmove"};e.CUSTOM_DRAG_EVENT="oncustomdrag";function i(t,e,n,i){var a=function(e){i&&e.preventDefault(),n.call(t,e,t,function(t){if(t.clientX)return{x:t.clientX,y:t.clientY};if(t.type.indexOf("touch")>-1&&t.touches&&t.touches[0])return function(t){var e=t.touches[0].clientX,n=t.touches[0].clientY;if(t.touches.length>1){var r=Array.from(t.touches).filter(function(t){return o(t.clientX,window.innerWidth)&&o(t.clientY,window.innerHeight)});r.length&&(e=r[0].clientX,n=r[0].clientY)}return{x:e,y:n}}(t);return null}(e))};return t.element.addEventListener(e,a),r[e]&&r[e]!==e?(t.element.addEventListener(r[e],a),function(){t.element.removeEventListener(e,a),t.element.removeEventListener(r[e],a)}):function(){t.element.removeEventListener(e,a)}}function o(t,e){return t>70&&t<e-70}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Setting=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(1);var o=e.Setting=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),isNaN(r)&&(r=e.a||1),this.color=e,this.lineWidth=n,this.opacity=r,isNaN(r)||this.color.setOpacity(r)}return r(t,[{key:"copy",value:function(){return new t(this.color.copy(),this.lineWidth,this.opacity)}}]),t}();o.fromObject=function(t){return new o(i.Color.fromObject(t.color),t.lineWidth||5)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.colorButton=function(){return a({class:"btn circle custom-color-btn",onclick:function(t,e){var n,r,o=this;n=this.v_color,r=function(t){o.emit("updateColor",t)},(0,i.colorPicker)({colorSelected:function(t){this.v_color=t,r(t)},currentColor:n})},v_color:null,set_color:c,style:"background-color: rgb(40,40,40)"},s({class:"material-icons md-light md-36"},"brush"))};var r=n(0),i=(n(2),n(13)),o=(n(1),r.e.elements),a=o.button,s=o.i;o.div,r.e.getHandle;function c(){this.style.backgroundColor=""+this.v_color.getAsCssValue()}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();e.LocalStore=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.storage=localStorage}return i(t,[{key:"save",value:function(t,e){var n=this;return this.verifyStorage().then(function(){return n.serialize(e)}).then(function(e){return n.insert(t,e)})}},{key:"load",value:function(t){var e=this;return this.verifyStorage().then(function(){return e.storage.getItem(t)}).then(function(t){return t?e.deserialize(t):null})}},{key:"clear",value:function(){return this.storage.clear(),Promise.resolve()}},{key:"remove",value:function(t){return this.storage.removeItem(t),Promise.resolve(!0)}},{key:"getKeys",value:function(){return Promise.resolve(Object.keys(this.storage))}},{key:"verifyStorage",value:function(){return this.storage?Promise.resolve():Promise.reject("localStorage is not available")}},{key:"serialize",value:function(t){return this.isDate(t)&&(t=t.toISOString()),"string"!=typeof t&&(t=JSON.stringify(t)),t}},{key:"deserialize",value:function(t){return t&&(t.indexOf("{")>-1||t.indexOf("[")>-1)?this.getObjectProps(JSON.parse(t)):"true"===t||"false"===t?"true"===t:isNaN(Number(t))?this.isSerializedDate(t)?this.convertToDate(t):"undefined"===t?null:t:Number(t)}},{key:"getObjectProps",value:function(t){var e=this;return Object.keys(t).map(function(n){t[n]=e.getPropValue(t[n])}),t}},{key:"getPropValue",value:function(t){var e=this;return this.isArray(t)?t.map(function(t){return e.getPropValue(t)}):"object"===(void 0===t?"undefined":r(t))?this.getObjectProps(t):"string"==typeof t&&this.isSerializedDate(t)?this.convertToDate(t):t}},{key:"convertToDate",value:function(t){var e=Date.parse(t);return isNaN(e)?t:new Date(e)}},{key:"isSerializedDate",value:function(t){var e=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)/.test(t);return e||/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+/.test(t)}},{key:"insert",value:function(t,e){try{return this.storage.setItem(t,e),Promise.resolve(!0)}catch(t){return Promise.reject(t)}}},{key:"isDate",value:function(t){return"[object Date]"===Object.prototype.toString.call(t)}},{key:"isArray",value:function(t){return"[object Array]"===Object.prototype.toString.call(t)}}]),t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={$:function(t){return document.querySelector(t)},$$:function(t){return Array.from(document.querySelectorAll(t))}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dragButton=function(t,e){e.setAttribute("v_dragging",!1),e.setAttribute("set_dragging",function(t){this[t?"addClass":"removeClass"]("o-hide")}),t=Object.assign(t,{class:"o-relative",v_dragging:!1,e_dragging:a,v_dragLocation:null,e_onDragLocationChanged:function(t){this.v_dragLocation=t}});for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return o(t,e,o({class:"c-drag-overlay",v_dragging:!1,set_dragging:function(t){this.setActive(t)},oncustomdrag:function(t){var e={win:{x:0,y:0},view:{x:0,y:0}},n=!1,r=!0,i=null,o={start:function(t,i,o){r=!0,n=!0,e.view=o,e.win=this.windowOffset(),a.call(this,t,i,o,500),this.emit("onDragLocationChanged",{x:e.win.x,y:e.win.y}),this.emit("dragging",!0)},move:function(t,i,o){if(n&&o){a.call(this,t,i,o,500);var s=o.x-e.view.x,c=s+e.win.x;Math.abs(s)>10&&(r=!1),this.emit("onDragLocationChanged",{x:c,y:e.win.y}),this.emit("onMove",t,o.x)}},finish:function(e,o,a){clearTimeout(i),n&&(n=!1,this.emit("dragging",!1),r&&this.emit("onlick",e,t),this.emit("onDragLocationChanged",null))}};function a(t,e,n,r){var a=this;clearTimeout(i),i=setTimeout(function(){return o.finish.call(a,t,e,n)},r)}return o}(e)},r),e.clone("dragbutton",{onRender:function(){this.addClass("o-fixed o-none"),this.setAttribute("style",""),this.setAttribute("v_dragLocation",null),this.addEmitHandler("set_dragging",function(t){this.setActive(t)}),this.addEmitHandler("set_dragLocation",function(t){this.style=t?"left: "+t.x+"px; top: "+t.y+"px;":""})}}))};var r=n(0),i=r.e.elements,o=(i.button,i.i,i.div);r.e.getHandle;function a(t){this.v_dragging=t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.brushSizeButton=function(){return(0,i.dragButton)({e_onMove:u,e_onclick:l,_updateSize:f},a({class:"btn circle brush-size-btn o-flex"},s({class:"material-icons md-light md-18"},"brush"),s({class:"material-icons md-light md-36"},"brush")),c({class:"o-width--100 o-height--100 o-relative"},c({class:"o-flex--column o-width--100 o-height--100"},c({class:"o-flex--column o-margin--auto"},c({class:"c-brush-size__editing-overlay"},c({class:"circle o-bkg--black o-margin--h-auto o-margin--b-20",v_size:1,set_size:function(t){this.style="width: "+t+"px; height: "+t+"px;"},style:"",handle:"sizeDisplay"}),c({class:"hdg hdg--2",v_size:1,set_size:function(t){this.textContent=t+"px line width"}},"")))),c({class:"c-brush-size__indicator-container"},c({class:"c-brush-size__indicator"},[50,39,27,15,3].map(function(t){return c({class:"circle o-bkg--black o-margin--t-auto",style:"width: "+t+"px; height: "+t+"px"})})),c({class:"c-brush-size__indicator-line o-bkg--black"}))))};var r=n(0),i=n(7),o=r.e.elements,a=o.button,s=o.i,c=o.div;r.e.getHandle;function u(t,e){console.log("handlingMove");var n=window.innerWidth-150;if(!(e>n)){var r=(n-e)/(n/50);this._updateSize(r)}}function l(t,e){return console.warn("clicked!!!"),!1}function f(t){t=Math.round(Math.max(t,1)),this.emit("updateSize",t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.brushControl=function(){return s({},(0,i.colorButton)(),(0,o.brushSizeButton)())};var r=n(0),i=(n(1),n(4)),o=n(8),a=(n(3),r.e.elements),s=(a.div,a.button,a.i,a.virtual);r.e.getHandle},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=[{r:244,g:67,b:54,a:1},{r:233,g:30,b:99,a:1},{r:156,g:39,b:176,a:1},{r:103,g:58,b:183,a:1},{r:63,g:81,b:181,a:1},{r:33,g:150,b:243,a:1},{r:3,g:169,b:244,a:1},{r:0,g:188,b:212,a:1},{r:0,g:150,b:136,a:1},{r:76,g:175,b:80,a:1},{r:139,g:195,b:74,a:1},{r:205,g:220,b:57,a:1},{r:255,g:235,b:59,a:1},{r:255,g:193,b:7,a:1},{r:255,g:152,b:0,a:1},{r:255,g:87,b:34,a:1},{r:121,g:85,b:72,a:1},{r:158,g:158,b:158,a:1},{r:96,g:125,b:139,a:1}]},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tab=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return s({_id:t.id||Symbol("tab"),class:"c-tab-layout__tab"+(t.active?" active":""),_active:t.active,_title:t.title},n)},e.tabs=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=n.map(function(t,e){return function(t,e,n){return a({class:"c-tab-layout__button"+(t.attr._active?" active":""),onclick:n(e)},t.attr._title)}(t,e,s)});function s(t){return function(e){n.forEach(function(e,n){return e.setActive(n===t)}),i.forEach(function(e,n){return e.setActive(n===t)})}}return o({class:"c-tab-layout"},o({class:"c-tab-layout__button-container"},i),o({class:"c-tab-layout__container"},n))};var r=n(0),i=r.e.elements,o=i.div,a=i.button,s=r.e.register("d-tab")},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return i({class:"c-modal",e_onremove:function(){this.remove()}},i({class:"c-modal__overlay o-flex"},i({class:"c-modal__inner-container"},i({class:"c-modal__content"},t),i({class:"c-modal__btn-container"},o({class:"btn c-modal__btn-close",onclick:function(){this.emit("onremove")}},"OK"))))).render(document.body)};var r=n(0).e.elements,i=r.div,o=r.button},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.colorPicker=function(t){return(0,i.default)(l({class:"c-color-picker__tabs",v_color:t.currentColor,e_onColorChanged:function(e){this.v_color=e,t.colorSelected(e)}},(0,o.tabs)({},(0,o.tab)({title:"swatches",active:!0},l({class:"c-color-swatches__container"},p(),l({class:"c-color-swatches"},a.default.map(m)))),(0,o.tab)({title:"custom",active:!1},l({class:"c-color-picker"},p(),l({class:"c-color-picker__sliders"},Object.keys(v).map(g)))))))};var r=n(0),i=c(n(12)),o=n(11),a=c(n(10)),s=n(1);function c(t){return t&&t.__esModule?t:{default:t}}var u=r.e.elements,l=u.div,f=u.input,d=u.button,h=(u.p,u.label),v=(r.e.getHandle,{red:"r",green:"g",blue:"b",opacity:"a"});function p(){return l({class:"c-color-picker__display",style:"",v_color:null,set_color:function(t){this.style="background-color: "+this.v_color.getAsCssValue()}})}function g(t){var e,n=v[t],r="opacity"===t?1:256,i="opacity"===t?.01:1;return l({class:"c-color-picker__option"},h({class:"c-color-picker__range-label"},t),f({class:"c-color-picker__range",type:"range",min:0,max:r,step:i,v_color:null,set_color:function(t){this.value=t[n]},value:"",onchange:(e=n,function(t){this.value=Number(t.target.value);var n,r,i,o=s.Color.fromObject(Object.assign({},this.v_color,(n={},r=e,i=this.value,r in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,n)));this.emit("onColorChanged",o)})}))}function m(t){var e=s.Color.fromObject(t);return d({class:"btn circle",onclick:function(t){return function(e){this.emit("onColorChanged",t)}}(e),style:"background-color: "+e.getAsCssValue()+";"})}},function(t,e,n){"undefined"!=typeof self&&self,t.exports=function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,n){"use strict";function r(t,e){t.attr[e]&&t.attr[e].call(t)}function i(t,e){return t||a("tagName must be defined"),function(n){n=n||{};var r=Array.from(arguments).slice(1);return n.render||Array.isArray(n)&&n[0].render?(r.unshift(n),n={}):p(n)?n={textContent:n}:p(r[0])&&(n.textContent=r[0],r=r.slice(1)),Object.assign({tagName:t,children:[].concat.apply([],r),attr:n||{},render:function(t){var e=this.processRender(t);return this.handle=this.handle||e.attr.id||e.attr._id||Symbol(e.tagName),e.elem&&(e.elem.remove=e.remove),f[this.handle]=e,e}},m.prototype,e)}}function o(t,e){return t.slice(0,e.length)===e}function a(t){throw new Error(t)}function s(t){return function(e){return(void 0===e?"undefined":c(e))===t}}Object.defineProperty(e,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.register=i,e.override=function(t){return function(e,n){return i(e,Object.assign({},t,n))}},e.getHandle=function(t){return f[t]};var u={class:"className"},l="textContent|innerText|innerHTML|className|value|style".split("|").reduce(function(t,e){return t[e]=1,t},{}),f={},d={attach:function(t){this.parentElement=t;var e=this.elem;return e||(e=document.createElement(this.tagName),t.appendChild(e)),e},addEventListener:function(t,e){var n=this;this.elem.addEventListener(t,function(t){e.apply(n,[t,n.elem])})},setProp:function(t,e){this.elem[t]=e},addEmitHandler:function(t,e){this[t]=e},setAttribute:function(t,e){var n=u[t]||t;this.elem?function(t,e,n){var r=u[e]||e,i=o(e,"v_"),a=o(e,"_"),s=t.elem;if(a)return t[r]=n,n;var c={set:function(r,o){(n!==r||o)&&(i?(t.setVirtual(e,r),function t(e){return(e.renderedChildren||[]).reduce(function(e,n){return e.concat([n],t(n))},[])}(t).forEach(function(t){if(t.hasOwnProperty(e)){t[e]=r;var n=e.replace("v_","set_");t[n]&&t[n].apply(t,[r])}})):l[e]||g(r)?t.setProp(e,r):s.setAttribute(e,r),n=r)},get:function(){return"style"===e&&t.element&&t.element.style||n}};Object.defineProperty(t,r,c),c.set(n,1),t[r]}(this,n,e):this.attr[t]=e},setVirtual:function(t,e){},renderChildren:function(t,e){var n=this;return e.map(function(e){return e.render||a("child must have render function"),e.parent=n,e.render(t)})},processRender:function(t){var e=this,n=this.attach(t,this);return this.elem=n,this.element=n,r(this,v.ATTACH),this.renderedChildren=this.renderChildren(n,this.children),Object.keys(this.attr).forEach(function(t){var n=e.attr[t];if(!(h.indexOf(t)>-1))return o(t,"on")?e.addEventListener(t.slice(2),n):o(t,"e_")||o(t,"set_")?e.addEmitHandler(t,n):void e.setAttribute(t,n)}),r(this,v.RENDER),this},remove:function(){this.renderedChildren.forEach(function(t){return t.remove()}),f[this.handle]=null;var t=this.parentElement;t&&t!==this.elem&&t.removeChild(this.elem),this.parent=null,this.parentElement=null,r(this,v.destroy)},emit:function(t){if(this.parent){var e="e_"+t,n=Array.from(arguments);this.parent[e]&&this.parent[e].apply(this.parent,n.slice(1)),(this.parent||{}).emit&&this.parent.emit.apply(this.parent,n)}}},h=["onRender","onAttach","onDestroy"],v={RENDER:h[0],ATTACH:h[1],DESTROY:h[2]},p=s("string"),g=(s("undefined"),s("boolean")),m=function(){};Object.keys(d).forEach(function(t){return m.prototype[t]=d[t]}),e.e=i}])},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Path=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(5),o=n(3),a=n(1);var s=new i.LocalStore;e.Path=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ctx=n,this.clear=r,this.paths=[],this.redo=[],this.canvas=e,this.settings=new o.Setting(new a.Color(20,45,200),5,1),this.restorePath()}return r(t,[{key:"undo",value:function(){this.clear(),this.redo.push(this.paths.pop()),this.drawAllPaths(this.paths)}},{key:"updateSettings",value:function(t){this.settings=Object.assign(this.settings,t),t.color&&1!==t.color.a&&(this.settings.opacity=t.color.a)}},{key:"startDrawing",value:function(){var t=this,e=[];return{start:function(t,n,r){e=[r],Object.assign({},r)},move:function(n,r,i){n.preventDefault(),n.stopPropagation(),e.push(i),t.drawLine(e.slice(-2),t.settings)},finish:function(){t.savePath(e,t.settings)}}}},{key:"drawLine",value:function(t,e){var n=this;t&&t.length&&(t=t.filter(function(t){return!!t}),this.ctx.beginPath(),this.ctx.moveTo(t[0].x,t[0].y),t.forEach(function(t){n.ctx.lineTo(t.x,t.y)}),this.ctx.lineWidth=e.lineWidth,this.ctx.lineCap="round",this.ctx.strokeStyle=e.color.getAsCssValue(),this.ctx.stroke())}},{key:"savePath",value:function(t,e){this.paths.push({path:t,settings:e.copy()}),this.clear(),this.drawAllPaths(this.paths),s.save("paths",this.paths)}},{key:"restorePath",value:function(){var t=this;s.load("paths").then(function(e){return t.drawAllPaths(e)})}},{key:"drawAllPaths",value:function(t){var e=this;t&&t.length&&(t.forEach(function(t){var n=o.Setting.fromObject(t.settings);e.drawLine(t.path,n)}),this.paths=t)}},{key:"clearBackstack",value:function(){this.paths=[]}}]),t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.init=function(){(0,o.addDragHandler)({element:c},l.startDrawing())},e.clear=f,e.undo=function(){l.undo()},e.downloadImage=function(t){this.href=c.toDataURL()},e.updateSettings=function(t){l.updateSettings(t)};var r=n(15),i=n(5),o=n(2),a=n(0),s=new i.LocalStore,c=document.getElementById("canvas"),u=c.getContext("2d"),l=new r.Path(c,u,f);a.e.elements.a;function f(t){t&&l.clearBackstack(),u.clearRect(0,0,c.width,c.height),s.save("paths",null)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.controlOverlay=function(t){var e=new a.Setting(h,v,h.a);return(0,r.updateSettings)(e),f({class:"c-overlay-container",_updateSettings:function(){(0,r.updateSettings)(this.v_settings)},v_settings:e,set_settings:g,v_color:h,v_size:v,e_updateColor:p("v_color"),e_updateSize:p("v_size")},d({class:"btn circle download-btn",href:"#",download:"drawing.png",onclick:r.downloadImage},l({class:"material-icons md-light md-36",textContent:"save"})),f({class:"c-editing-buttons"},u({class:"btn circle clear-btn",onclick:function(){(0,r.clear)(!0)}},l({class:"material-icons md-light md-36"},"delete_forever")),u({class:"btn circle undo-btn",onclick:r.undo},l({class:"material-icons md-light md-36"},"undo")),(0,o.brushControl)()))};var r=n(16),i=n(0),o=(n(4),n(9)),a=n(3),s=n(1),c=i.e.elements,u=c.button,l=c.i,f=c.div,d=c.a,h=(i.e.getHandle,function(){var t=localStorage.getItem("v_color");if(t)return s.Color.fromObject(JSON.parse(t));return new s.Color(40,40,40,1)}()),v=function(){var t=localStorage.getItem("v_size");if(t)return Number(t);return 5}();function p(t){return function(e){this[t]=e,localStorage.setItem(t,JSON.stringify(e)),this.v_settings=new a.Setting(this.v_color,this.v_size,this.v_color.a),this._updateSettings()}}function g(t){this.v_settings=t,this._updateSettings()}(0,r.init)()},function(t,e,n){"use strict";var r,i=n(17),o=n(6),a=(r=o)&&r.__esModule?r:{default:r};(0,i.controlOverlay)().render(a.default.$("#app")),"serviceWorker"in navigator?navigator.serviceWorker.register("./sw.js").then(function(t){console.log("Service worker registration succeeded:",t)}).catch(function(t){console.log("Service worker registration failed:",t)}):console.log("Service workers are not supported.")}]);