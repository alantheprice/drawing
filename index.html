<!DOCTYPE html>
<html lang="en">

  <head>
    <title>RAWD</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#5b97f7">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="DRAW">
    <meta name="apple-mobile-web-app-status-bar-style" content="#5b97f7">
    <link rel="apple-touch-icon" href="./icon/launcher-icon-8x.png">
    <link rel="apple-touch-startup-image" href="./icon/launcher-icon-8x.png">
    <link rel="manifest" href="./manifest.json">
  </head>

  <body>
    <!-- for initial load it is helpful to set a few styles so the page doesn't need to wait for styles to load -->
    <canvas id="canvas" style="width: 100vw; height: 100vh; background-color: #eee;"></canvas>
    <div id="app"></div>
    <script>
      (function() {
        var LK = 'loaded'
        var canvas = document.getElementById('canvas')
        var h = window.innerHeight
        var w = window.innerWidth
        setSize(w,h)
        var a = Math.min(w, h)
        var yc = h/2
        var xc = w/2
        var ctx = canvas.getContext('2d')
        var fs = h / 5
        // outline
        var arcs = [
          [xc, yc, fs, 0, 2,'stroke'],
          [xc - (fs/2.5), yc - (fs/2.5), a / 50, 0, 2,'fill'],
          [xc + (fs/2.5), yc - (fs/2.5), a / 50, 0, 2, 'fill'],
          [xc, yc, fs/2, .1, .9,'stroke']
        ];

        if (localStorage.getItem(LK) === 'true') {
          // only show on first load.
          return;
        }
        arcs.forEach(function(p, i) {
          setTimeout(function() {
            arc(p[0],p[1],p[2],p[3],p[4],p[5])
          }, 500 * i)
          if (i + 1 === arcs.length) {
            setTimeout(function(){
              ctx.clearRect(0,0, w, h)
            }, 900 * i)
          }
        })

        function setSize(w, h) {
          canvas.setAttribute('width', w + '')
          canvas.setAttribute('height', h + '')
          canvas.setAttribute('style', `width: ${w}px; height: ${h}px; background-color: #eee;`)
        }

        function arc(l, t, r, s, m, func) {
          ctx.beginPath()
          ctx.arc(l, t, r, s * Math.PI, m * Math.PI, false);
          ctx.lineWidth = a / 50
          ctx.strokeStyle = 'black'
          ctx.lineCap = 'round'
          ctx[func]()
        }

        localStorage.setItem(LK, 'true')

        function path() {
          //TODO: math for circle.
        }
      })()
    </script>
    <noscript>
      <h1 style="color: #ff0000; text-align: center; margin:48% 50px 0 50px;">Sorry Javascript is disabled, a drawing application doesn't work without Javascript.  You are out of luck.</h1>
    </noscript>
    <link rel="stylesheet" href="./app.css">
    <script async src="./dist/app.min.js"></script>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  </body>

</html>
